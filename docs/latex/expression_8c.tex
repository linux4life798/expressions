\hypertarget{expression_8c}{}\section{expression.\+c File Reference}
\label{expression_8c}\index{expression.\+c@{expression.\+c}}


A compact math expression engine.  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include \char`\"{}types.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}errors.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}symbolic.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}expression.\+h\char`\"{}}\newline
Include dependency graph for expression.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{expression_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} \hyperlink{expression_8c_a513e1cb7ae9dbcef50307f2c13e00dd9}{expression\+\_\+new} (void)
\begin{DoxyCompactList}\small\item\em New blank expression. \end{DoxyCompactList}\item 
\hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} \hyperlink{expression_8c_a7c44bf0c0e78a10270eeec18a89eb340}{expression\+\_\+new\+\_\+value} (\hyperlink{types_8h_ae4d4f561b975159d5852cb2c30bf20ef}{value\+\_\+t} val)
\item 
\hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} \hyperlink{expression_8c_affb6adb350cc9126e06af303607ca812}{expression\+\_\+new\+\_\+tree} (char op, \hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} left, \hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} right)
\item 
\hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} \hyperlink{expression_8c_a02b7142f5701d82971d1f21ec20772be}{expression\+\_\+new\+\_\+sym} (\hyperlink{symbolic_8h_a32ce0f63fa539078e25332dae6b7c77c}{sym\+\_\+t} \hyperlink{structsym}{sym})
\item 
void \hyperlink{expression_8c_a6f1cc930ee50ba61adf466fbdf4b1fb2}{expression\+\_\+free} (\hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} exp)
\begin{DoxyCompactList}\small\item\em Free an expression. \end{DoxyCompactList}\item 
\hyperlink{types_8h_ae4d4f561b975159d5852cb2c30bf20ef}{value\+\_\+t} \hyperlink{expression_8c_a70f3326a088855f6916f04baf27feed3}{expression\+\_\+evaluate} (\hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} exp)
\item 
void \hyperlink{expression_8c_aca3bb6ea526afbf4f238a0877fe3e131}{expression\+\_\+to\+\_\+string} (char $\ast$dst\+\_\+str, \hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} src\+\_\+exp)
\begin{DoxyCompactList}\small\item\em Expression to String. \end{DoxyCompactList}\item 
size\+\_\+t \hyperlink{expression_8c_aadcbbaeb4759be2826011415c4fc89c0}{number\+\_\+len} (size\+\_\+t str\+\_\+len, char $\ast$str)
\item 
void \hyperlink{expression_8c_a5b815476fd7c2f8ebb81bfde2b024f48}{str\+\_\+cpy} (char $\ast$dest, const char $\ast$src, size\+\_\+t count)
\begin{DoxyCompactList}\small\item\em Same as strncpy, but throws an error if a null character is reached in src. \end{DoxyCompactList}\item 
\hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} \hyperlink{expression_8c_a63988c00ace0261c4896f132f5f86fda}{string\+\_\+to\+\_\+expression} (size\+\_\+t str\+\_\+len, char const $\ast$str)
\begin{DoxyCompactList}\small\item\em Convert String to an Expression. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
A compact math expression engine. 

\begin{DoxyDate}{Date}
Apr 6, 2014 
\end{DoxyDate}
\begin{DoxyAuthor}{Author}
Craig Hesling 
\end{DoxyAuthor}


\subsection{Function Documentation}
\mbox{\Hypertarget{expression_8c_a70f3326a088855f6916f04baf27feed3}\label{expression_8c_a70f3326a088855f6916f04baf27feed3}} 
\index{expression.\+c@{expression.\+c}!expression\+\_\+evaluate@{expression\+\_\+evaluate}}
\index{expression\+\_\+evaluate@{expression\+\_\+evaluate}!expression.\+c@{expression.\+c}}
\subsubsection{\texorpdfstring{expression\+\_\+evaluate()}{expression\_evaluate()}}
{\footnotesize\ttfamily \hyperlink{types_8h_ae4d4f561b975159d5852cb2c30bf20ef}{value\+\_\+t} expression\+\_\+evaluate (\begin{DoxyParamCaption}\item[{\hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t}}]{exp }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=309pt]{expression_8c_a70f3326a088855f6916f04baf27feed3_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{expression_8c_a6f1cc930ee50ba61adf466fbdf4b1fb2}\label{expression_8c_a6f1cc930ee50ba61adf466fbdf4b1fb2}} 
\index{expression.\+c@{expression.\+c}!expression\+\_\+free@{expression\+\_\+free}}
\index{expression\+\_\+free@{expression\+\_\+free}!expression.\+c@{expression.\+c}}
\subsubsection{\texorpdfstring{expression\+\_\+free()}{expression\_free()}}
{\footnotesize\ttfamily void expression\+\_\+free (\begin{DoxyParamCaption}\item[{\hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t}}]{exp }\end{DoxyParamCaption})}



Free an expression. 


\begin{DoxyParams}{Parameters}
{\em exp} & The expression to free \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=166pt]{expression_8c_a6f1cc930ee50ba61adf466fbdf4b1fb2_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{expression_8c_a513e1cb7ae9dbcef50307f2c13e00dd9}\label{expression_8c_a513e1cb7ae9dbcef50307f2c13e00dd9}} 
\index{expression.\+c@{expression.\+c}!expression\+\_\+new@{expression\+\_\+new}}
\index{expression\+\_\+new@{expression\+\_\+new}!expression.\+c@{expression.\+c}}
\subsubsection{\texorpdfstring{expression\+\_\+new()}{expression\_new()}}
{\footnotesize\ttfamily \hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} expression\+\_\+new (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



New blank expression. 

This function creates the most basic empty expression. \begin{DoxyReturn}{Returns}
A new empty expression 
\end{DoxyReturn}
\mbox{\Hypertarget{expression_8c_a02b7142f5701d82971d1f21ec20772be}\label{expression_8c_a02b7142f5701d82971d1f21ec20772be}} 
\index{expression.\+c@{expression.\+c}!expression\+\_\+new\+\_\+sym@{expression\+\_\+new\+\_\+sym}}
\index{expression\+\_\+new\+\_\+sym@{expression\+\_\+new\+\_\+sym}!expression.\+c@{expression.\+c}}
\subsubsection{\texorpdfstring{expression\+\_\+new\+\_\+sym()}{expression\_new\_sym()}}
{\footnotesize\ttfamily \hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} expression\+\_\+new\+\_\+sym (\begin{DoxyParamCaption}\item[{\hyperlink{symbolic_8h_a32ce0f63fa539078e25332dae6b7c77c}{sym\+\_\+t}}]{sym }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=314pt]{expression_8c_a02b7142f5701d82971d1f21ec20772be_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{expression_8c_affb6adb350cc9126e06af303607ca812}\label{expression_8c_affb6adb350cc9126e06af303607ca812}} 
\index{expression.\+c@{expression.\+c}!expression\+\_\+new\+\_\+tree@{expression\+\_\+new\+\_\+tree}}
\index{expression\+\_\+new\+\_\+tree@{expression\+\_\+new\+\_\+tree}!expression.\+c@{expression.\+c}}
\subsubsection{\texorpdfstring{expression\+\_\+new\+\_\+tree()}{expression\_new\_tree()}}
{\footnotesize\ttfamily \hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} expression\+\_\+new\+\_\+tree (\begin{DoxyParamCaption}\item[{char}]{op,  }\item[{\hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t}}]{left,  }\item[{\hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t}}]{right }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=312pt]{expression_8c_affb6adb350cc9126e06af303607ca812_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{expression_8c_a7c44bf0c0e78a10270eeec18a89eb340}\label{expression_8c_a7c44bf0c0e78a10270eeec18a89eb340}} 
\index{expression.\+c@{expression.\+c}!expression\+\_\+new\+\_\+value@{expression\+\_\+new\+\_\+value}}
\index{expression\+\_\+new\+\_\+value@{expression\+\_\+new\+\_\+value}!expression.\+c@{expression.\+c}}
\subsubsection{\texorpdfstring{expression\+\_\+new\+\_\+value()}{expression\_new\_value()}}
{\footnotesize\ttfamily \hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} expression\+\_\+new\+\_\+value (\begin{DoxyParamCaption}\item[{\hyperlink{types_8h_ae4d4f561b975159d5852cb2c30bf20ef}{value\+\_\+t}}]{val }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=319pt]{expression_8c_a7c44bf0c0e78a10270eeec18a89eb340_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{expression_8c_aca3bb6ea526afbf4f238a0877fe3e131}\label{expression_8c_aca3bb6ea526afbf4f238a0877fe3e131}} 
\index{expression.\+c@{expression.\+c}!expression\+\_\+to\+\_\+string@{expression\+\_\+to\+\_\+string}}
\index{expression\+\_\+to\+\_\+string@{expression\+\_\+to\+\_\+string}!expression.\+c@{expression.\+c}}
\subsubsection{\texorpdfstring{expression\+\_\+to\+\_\+string()}{expression\_to\_string()}}
{\footnotesize\ttfamily void expression\+\_\+to\+\_\+string (\begin{DoxyParamCaption}\item[{char $\ast$}]{dst\+\_\+str,  }\item[{\hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t}}]{src\+\_\+exp }\end{DoxyParamCaption})}



Expression to String. 

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=306pt]{expression_8c_aca3bb6ea526afbf4f238a0877fe3e131_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{expression_8c_aadcbbaeb4759be2826011415c4fc89c0}\label{expression_8c_aadcbbaeb4759be2826011415c4fc89c0}} 
\index{expression.\+c@{expression.\+c}!number\+\_\+len@{number\+\_\+len}}
\index{number\+\_\+len@{number\+\_\+len}!expression.\+c@{expression.\+c}}
\subsubsection{\texorpdfstring{number\+\_\+len()}{number\_len()}}
{\footnotesize\ttfamily size\+\_\+t number\+\_\+len (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{str\+\_\+len,  }\item[{char $\ast$}]{str }\end{DoxyParamCaption})}

\mbox{\Hypertarget{expression_8c_a5b815476fd7c2f8ebb81bfde2b024f48}\label{expression_8c_a5b815476fd7c2f8ebb81bfde2b024f48}} 
\index{expression.\+c@{expression.\+c}!str\+\_\+cpy@{str\+\_\+cpy}}
\index{str\+\_\+cpy@{str\+\_\+cpy}!expression.\+c@{expression.\+c}}
\subsubsection{\texorpdfstring{str\+\_\+cpy()}{str\_cpy()}}
{\footnotesize\ttfamily void str\+\_\+cpy (\begin{DoxyParamCaption}\item[{char $\ast$}]{dest,  }\item[{const char $\ast$}]{src,  }\item[{size\+\_\+t}]{count }\end{DoxyParamCaption})}



Same as strncpy, but throws an error if a null character is reached in src. 


\begin{DoxyParams}{Parameters}
{\em dest} & Destination string buffer. \\
\hline
{\em src} & Source string buffer. \\
\hline
{\em count} & The number of bytes to copy. \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=209pt]{expression_8c_a5b815476fd7c2f8ebb81bfde2b024f48_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{expression_8c_a63988c00ace0261c4896f132f5f86fda}\label{expression_8c_a63988c00ace0261c4896f132f5f86fda}} 
\index{expression.\+c@{expression.\+c}!string\+\_\+to\+\_\+expression@{string\+\_\+to\+\_\+expression}}
\index{string\+\_\+to\+\_\+expression@{string\+\_\+to\+\_\+expression}!expression.\+c@{expression.\+c}}
\subsubsection{\texorpdfstring{string\+\_\+to\+\_\+expression()}{string\_to\_expression()}}
{\footnotesize\ttfamily \hyperlink{expression__lite_8h_ac198bce62637e5d742da0218d544a7ac}{expression\+\_\+t} string\+\_\+to\+\_\+expression (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{str\+\_\+len,  }\item[{char const $\ast$}]{str }\end{DoxyParamCaption})}



Convert String to an Expression. 

Parses a string into an expression. \begin{DoxyNote}{Note}
level was type int -\/ changed to unsigned to temporarily quiet compiler 
\end{DoxyNote}
\begin{DoxyRefDesc}{Bug}
\item[\hyperlink{bug__bug000001}{Bug}]Cannot parse negative numbers \end{DoxyRefDesc}
\begin{DoxyWarning}{Warning}
Symbols must start with A\+L\+P\+HA chars to be properly identified.
\end{DoxyWarning}
\hypertarget{expression__lite_8h_parsing_algorithm}{}\subsection{Algorithm}\label{expression__lite_8h_parsing_algorithm}
\hypertarget{expression__lite_8h_parsing_overview}{}\subsubsection{Parsing Overview}\label{expression__lite_8h_parsing_overview}

\begin{DoxyItemize}
\item Step 1\+: Recording details about the string while scanning from left to right.
\item Step 2\+: There are two real cases. The string is a single number (with no operations) or it is two sub-\/expressions joined by an operation.~\newline
 Cases\+:
\begin{DoxyItemize}
\item If it is a simple number, we know how to parse it and create a value expression.
\item If it is not just a number, we want split the string about the operation at the lowest level. (in practice, we end up finding the one that is farthest left of the lowest level) We then construct a tree expression with the chosen operation and the sub-\/expression results from running the function recursively on each of the sub-\/strings.
\end{DoxyItemize}
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em str\+\_\+len} & Length of given string \\
\hline
{\em str} & String to parse \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The expression\+\_\+t representation of the inputed string
\end{DoxyReturn}
\begin{DoxyRefDesc}{Test}
\item[\hyperlink{test__test000001}{Test}]Test for negative values \end{DoxyRefDesc}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000001}{Todo}]Allow symbols to be detected when they start with numeric digits also. \hyperlink{symbolic_8h_a78aa047f421c2d8ab5fab3c72d123d1b}{string\+\_\+to\+\_\+sym} is already compatible. \end{DoxyRefDesc}


$<$ Store original index

$<$ Used to explore the presence of a symbol parameter

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000002}{Todo}]Do series of additional syntax checks here. \end{DoxyRefDesc}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000003}{Todo}]Syntax Check\+: Check that level==0 \end{DoxyRefDesc}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000004}{Todo}]Syntax Check\+: Check that oparen\+\_\+count==cparen\+\_\+count \end{DoxyRefDesc}


\begin{DoxyNote}{Note}
left\+\_\+buf and right\+\_\+buf were changed to use malloc to avoid errors with C90 compilers 
\end{DoxyNote}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{expression_8c_a63988c00ace0261c4896f132f5f86fda_cgraph}
\end{center}
\end{figure}
